<Window x:Class="Loading.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:Loading.ViewModels"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        mc:Ignorable="d"
        Title="Matrix Chat" Height="600" Width="900"
        Background="#0D0D0D"
        FontFamily="Consolas"
        d:DataContext="{d:DesignInstance Type={x:Type vm:MainViewModel}}">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="4*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="1*" MinHeight="100"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Left Panel -->
        <DockPanel Grid.Row="0" Grid.Column="0" Grid.RowSpan="4" Background="#0D0D0D">
            <!-- ASCII Art in the top -->
            <TextBlock DockPanel.Dock="Top" 
                        Margin="5,20,5,10" 
                        Foreground="#00FF00" 
                        FontFamily="Consolas"
                        TextAlignment="Center"
                        FontSize="8"
                        LineHeight="8">
                    <Run Text="  ▓░ ░▒ ▓"/>
                    <LineBreak/>
                    <Run Text=" ░ ▒█▓█▒ ░"/>
                    <LineBreak/>
                    <Run Text="▒  ████  ▒"/>
                    <LineBreak/>
                    <Run Text=" ░ ▓██▓ ░"/>
                    <LineBreak/>
                    <Run Text="  ▒ ░░ ▒"/>
                    <LineBreak/>
                    <Run Text="░ ▓ ░░ ▓ ░"/>
                    <LineBreak/>
                    <Run Text=" ░  ▒▒  ░"/>
            </TextBlock>

            <!-- Control Buttons -->
            <StackPanel DockPanel.Dock="Top" 
                        Orientation="Vertical" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Top" 
                        Margin="5">
                <Button Content="Connect" 
                            Command="{Binding ConnectCommand}"
                            Style="{StaticResource CyberpunkButton}"
                            Width="85" Height="30"
                            Margin="0,0,0,1"/>
                <Button Content="Disconnect"
                            Command="{Binding DisconnectCommand}"
                            Style="{StaticResource CyberpunkButton}"
                            Width="85" Height="30"
                            Margin="0,0,0,1"/>
                <Button Content="Clear Chat"
                            Command="{Binding ClearChatCommand}"
                            Style="{StaticResource CyberpunkButton}"
                            Width="85" Height="30"/>
            </StackPanel>

            <!-- Another ASCII Art in the middle -->
            <TextBlock DockPanel.Dock="Top" 
                        Margin="5,20,5,10" 
                        Foreground="#00FF00" 
                        FontFamily="Consolas"
                        TextAlignment="Center"
                        FontSize="8"
                        LineHeight="8">
                    <Run Text="  ▓░ ░▒ ▓"/>
                    <LineBreak/>
                    <Run Text=" ░ ▒█▓█▒ ░"/>
                    <LineBreak/>
                    <Run Text="▒  ████  ▒"/>
                    <LineBreak/>
                    <Run Text=" ░ ▓██▓ ░"/>
                    <LineBreak/>
                    <Run Text="  ▒ ░░ ▒"/>
                    <LineBreak/>
                    <Run Text="░ ▓ ░░ ▓ ░"/>
                    <LineBreak/>
                    <Run Text=" ░  ▒▒  ░"/>
            </TextBlock>

            <!-- Ping Display -->
            <TextBlock Text="{Binding CurrentPing}"
                        Foreground="{Binding PingColor}"
                        DockPanel.Dock="Bottom"
                        TextAlignment="Center"
                        Margin="5"
                        FontSize="11"/>
        </DockPanel>

        <!-- Main Chat -->
        <Border Grid.Row="0" Grid.Column="1" 
                    Margin="10"
                    Background="#1A1A1A" 
                    CornerRadius="10">
            <Border.Effect>
                <DropShadowEffect Color="#00FF00" 
                                    BlurRadius="10" 
                                    ShadowDepth="0"/>
            </Border.Effect>
            <RichTextBox x:Name="ChatRichTextBox" Style="{StaticResource MatrixRichTextBox}"/>
        </Border>

        <!-- GridSplitter -->
        <GridSplitter Grid.Row="1" 
                        Grid.Column="1" 
                        Height="8"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Center"
                        Background="#1A1A1A"
                        Margin="10,0,10,0"
                        BorderThickness="1"
                        Cursor="SizeNS">
            <GridSplitter.Template>
                <ControlTemplate TargetType="{x:Type GridSplitter}">
                    <Border x:Name="PART_Border"
                                Background="#00FF00"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Opacity="0.7"
                                CornerRadius="2">
                        <Grid>
                            <StackPanel Orientation="Horizontal" 
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                <TextBlock Text="⋮" 
                                            Foreground="#1A1A1A" 
                                            FontSize="14"
                                            FontWeight="Bold"
                                            Margin="2,0"/>
                                <TextBlock Text="⋮" 
                                            Foreground="#1A1A1A" 
                                            FontSize="14"
                                            FontWeight="Bold"
                                            Margin="2,0"/>
                                <TextBlock Text="⋮" 
                                            Foreground="#1A1A1A" 
                                            FontSize="14"
                                            FontWeight="Bold"
                                            Margin="2,0"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="PART_Border" Property="Opacity" Value="1.0"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </GridSplitter.Template>
        </GridSplitter>

        <!-- Whispers Section -->
        <Border Grid.Row="2" Grid.Column="1" 
                    Margin="10,0,10,10"
                    Background="#1A1A1A" 
                    CornerRadius="10">
            <Border.Effect>
                <DropShadowEffect Color="#00FF00" 
                                    BlurRadius="10" 
                                    ShadowDepth="0"/>
            </Border.Effect>
            <DockPanel>
                <Border DockPanel.Dock="Top" 
                            Background="#333333" 
                            CornerRadius="5" 
                            Margin="5">
                    <TextBlock Text="Whispers"
                                Foreground="#00FFFF"
                                FontWeight="Bold"
                                Margin="10,5"
                                TextAlignment="Center"/>
                </Border>
                <RichTextBox x:Name="WhisperRichTextBox" Document="{Binding WhisperDocumentText}"
                                Style="{StaticResource MatrixRichTextBox}"
                                Foreground="#00FFFF"/>
            </DockPanel>
        </Border>

        <!-- User List -->
        <Border Grid.Row="0" Grid.Column="2" 
                    Grid.RowSpan="4" 
                    Margin="10"
                    Background="#1A1A1A" 
                    CornerRadius="10">
            <Border.Effect>
                <DropShadowEffect Color="#00FF00" 
                                    BlurRadius="10" 
                                    ShadowDepth="0"/>
            </Border.Effect>
            <DockPanel>
                <Border DockPanel.Dock="Top" 
                            Background="#333333" 
                            CornerRadius="5" 
                            Margin="5">
                    <TextBlock Text="{Binding ChannelInfo}"
                                Foreground="#00FF00"
                                FontWeight="Bold"
                                Margin="10,5"
                                TextAlignment="Center"/>
                </Border>
                <ListBox ItemsSource="{Binding Users}"
                            ItemContainerStyle="{StaticResource CyberpunkListBoxItem}"
                            Background="#1A1A1A"
                            BorderThickness="0"
                            Margin="10"/>
            </DockPanel>
        </Border>

        <!-- Message Input -->
        <Grid Grid.Row="3" Grid.Column="1" 
                Margin="10,5,10,10">
            <Border Background="#1A1A1A"
                        CornerRadius="5">
                <Border.Effect>
                    <DropShadowEffect Color="#00FF00" 
                                        BlurRadius="10" 
                                        ShadowDepth="0"/>
                </Border.Effect>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBox Text="{Binding InputText, UpdateSourceTrigger=PropertyChanged}"
                                Style="{StaticResource MatrixTextBox}"
                                KeyDown="OnInputKeyDown"/>

                    <Button Grid.Column="1"
                                Content="Send"
                                Command="{Binding SendMessageCommand}"
                                Style="{StaticResource CyberpunkButton}"
                                Width="80"
                                Height="30"
                                Margin="5,0"/>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>

<Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100" />
            <ColumnDefinition Width="3*" />
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="4*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="1*" MinHeight="100" />
            <RowDefinition Height="Auto" />
            <!-- For input box -->
        </Grid.RowDefinitions>


    <!-- Left Panel -->
    <DockPanel Grid.Row="0" Grid.Column="0" Grid.RowSpan="4" Background="#0D0D0D">
        <!-- ASCII Art in the top -->
        <TextBlock DockPanel.Dock="Top" 
                      Margin="5,20,5,10" 
                      Foreground="#00FF00" 
                      FontFamily="Consolas"
                      TextAlignment="Center"
                      FontSize="8"
                      LineHeight="8">
                <Run Text="  ▓░ ░▒ ▓"/>
                <LineBreak/>
                <Run Text=" ░ ▒█▓█▒ ░"/>
                <LineBreak/>
                <Run Text="▒  ████  ▒"/>
                <LineBreak/>
                <Run Text=" ░ ▓██▓ ░"/>
                <LineBreak/>
                <Run Text="  ▒ ░░ ▒"/>
                <LineBreak/>
                <Run Text="░ ▓ ░░ ▓ ░"/>
                <LineBreak/>
                <Run Text=" ░  ▒▒  ░"/>
        </TextBlock>

        <!-- Control Buttons -->
        <StackPanel DockPanel.Dock="Top" 
                       Orientation="Vertical" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Top" 
                       Margin="5">
            <Button Content="Connect" 
                        Command="{Binding ConnectCommand}"
                        Style="{StaticResource CyberpunkButton}"
                        Width="85" Height="30"
                        Margin="0,0,0,1"/>
            <Button Content="Disconnect"
                        Command="{Binding DisconnectCommand}"
                        Style="{StaticResource CyberpunkButton}"
                        Width="85" Height="30"
                        Margin="0,0,0,1"/>
            <Button Content="Clear Chat"
                        Command="{Binding ClearChatCommand}"
                        Style="{StaticResource CyberpunkButton}"
                        Width="85" Height="30"/>
        </StackPanel>

        <!-- Another ASCII Art in the middle -->
        <TextBlock DockPanel.Dock="Top" 
                      Margin="5,20,5,10" 
                      Foreground="#00FF00" 
                      FontFamily="Consolas"
                      TextAlignment="Center"
                      FontSize="8"
                      LineHeight="8">
                <Run Text="  ▓░ ░▒ ▓"/>
                <LineBreak/>
                <Run Text=" ░ ▒█▓█▒ ░"/>
                <LineBreak/>
                <Run Text="▒  ████  ▒"/>
                <LineBreak/>
                <Run Text=" ░ ▓██▓ ░"/>
                <LineBreak/>
                <Run Text="  ▒ ░░ ▒"/>
                <LineBreak/>
                <Run Text="░ ▓ ░░ ▓ ░"/>
                <LineBreak/>
                <Run Text=" ░  ▒▒  ░"/>
        </TextBlock>

        <!-- Ping Display -->
        <TextBlock Text="{Binding CurrentPing}"
                      Foreground="{Binding PingColor}"
                      DockPanel.Dock="Bottom"
                      TextAlignment="Center"
                      Margin="5"
                      FontSize="11"/>
    </DockPanel>

    <!-- Main Chat -->
    <Border Grid.Row="0" Grid.Column="1" 
                Margin="10"
                Background="#1A1A1A" 
                CornerRadius="10">
        <Border.Effect>
            <DropShadowEffect Color="#00FF00" 
                                BlurRadius="10" 
                                ShadowDepth="0"/>
        </Border.Effect>
        <RichTextBox x:Name="ChatRichTextBox" Style="{StaticResource MatrixRichTextBox}"/>
    </Border>

    <!-- GridSplitter -->
    <GridSplitter Grid.Row="1" 
                      Grid.Column="1" 
                      Height="8"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Center"
                      Background="#1A1A1A"
                      Margin="10,0,10,0"
                      BorderThickness="1"
                      Cursor="SizeNS">
        <GridSplitter.Template>
            <ControlTemplate TargetType="{x:Type GridSplitter}">
                <Border x:Name="PART_Border"
                            Background="#00FF00"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Opacity="0.7"
                            CornerRadius="2">
                    <Grid>
                        <StackPanel Orientation="Horizontal" 
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center">
                            <TextBlock Text="⋮" 
                                         Foreground="#1A1A1A" 
                                         FontSize="14"
                                         FontWeight="Bold"
                                         Margin="2,0"/>
                            <TextBlock Text="⋮" 
                                         Foreground="#1A1A1A" 
                                         FontSize="14"
                                         FontWeight="Bold"
                                         Margin="2,0"/>
                            <TextBlock Text="⋮" 
                                         Foreground="#1A1A1A" 
                                         FontSize="14"
                                         FontWeight="Bold"
                                         Margin="2,0"/>
                        </StackPanel>
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="PART_Border" Property="Opacity" Value="1.0"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </GridSplitter.Template>
    </GridSplitter>

    <!-- Whispers Section -->
    <Border Grid.Row="2" Grid.Column="1" 
                Margin="10,0,10,10"
                Background="#1A1A1A" 
                CornerRadius="10">
        <Border.Effect>
            <DropShadowEffect Color="#00FF00" 
                                BlurRadius="10" 
                                ShadowDepth="0"/>
        </Border.Effect>
        <DockPanel>
            <Border DockPanel.Dock="Top" 
                        Background="#333333" 
                        CornerRadius="5" 
                        Margin="5">
                <TextBlock Text="Whispers"
                             Foreground="#00FFFF"
                             FontWeight="Bold"
                             Margin="10,5"
                             TextAlignment="Center"/>
            </Border>
            <RichTextBox x:Name="WhisperRichTextBox" Document="{Binding WhisperDocumentText}"
                            Style="{StaticResource MatrixRichTextBox}"
                            Foreground="#00FFFF"/>
        </DockPanel>
    </Border>

    <!-- User List -->
    <Border Grid.Row="0" Grid.Column="2" 
                Grid.RowSpan="4" 
                Margin="10"
                Background="#1A1A1A" 
                CornerRadius="10">
        <Border.Effect>
            <DropShadowEffect Color="#00FF00" 
                                BlurRadius="10" 
                                ShadowDepth="0"/>
        </Border.Effect>
        <DockPanel>
            <Border DockPanel.Dock="Top" 
                        Background="#333333" 
                        CornerRadius="5" 
                        Margin="5">
                <TextBlock Text="{Binding ChannelInfo}"
                             Foreground="#00FF00"
                             FontWeight="Bold"
                             Margin="10,5"
                             TextAlignment="Center"/>
            </Border>
            <ListBox ItemsSource="{Binding Users}"
                         ItemContainerStyle="{StaticResource CyberpunkListBoxItem}"
                         Background="#1A1A1A"
                         BorderThickness="0"
                         Margin="10"/>
        </DockPanel>
    </Border>

    <!-- Message Input -->
    <Grid Grid.Row="3" Grid.Column="1" 
              Margin="10,5,10,10">
        <Border Background="#1A1A1A"
                    CornerRadius="5">
            <Border.Effect>
                <DropShadowEffect Color="#00FF00" 
                                    BlurRadius="10" 
                                    ShadowDepth="0"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox Text="{Binding InputText, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource MatrixTextBox}"
                             KeyDown="OnInputKeyDown"/>

                <Button Grid.Column="1"
                            Content="Send"
                            Command="{Binding SendMessageCommand}"
                            Style="{StaticResource CyberpunkButton}"
                            Width="80"
                            Height="30"
                            Margin="5,0"/>
            </Grid>
        </Border>
    </Grid>
</Grid>

